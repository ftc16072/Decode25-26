package org.firstinspires.ftc.teamcode.ftc16072.Opmodes;import com.pedropathing.follower.Follower;import com.pedropathing.geometry.BezierLine;import com.pedropathing.geometry.Pose;import com.pedropathing.paths.PathChain;import com.qualcomm.robotcore.eventloop.opmode.Autonomous;import com.qualcomm.robotcore.util.ElapsedTime;import org.firstinspires.ftc.robotcore.external.navigation.AngleUnit;import org.firstinspires.ftc.robotcore.external.navigation.DistanceUnit;import org.firstinspires.ftc.robotcore.external.navigation.Pose2D;import org.firstinspires.ftc.teamcode.pedroPathing.Constants;@Autonomous@SuppressWarnings("unused")public class ScoreAuto extends QQOpmode {    public static final double FIELD_SIZE = 144.000;    public static final double BLUE_X_STOP = 14.000;    double START_Y = 8.000;    double SHOOT_Y = 18.000;    double SHOOT_X_BLUE = 60.000;    double BEFORE_BALL_X_BLUE = 50;    double PARK_X_BLUE = 46.0;    double RED_X_STOP = FIELD_SIZE - BLUE_X_STOP;    double SHOOT_X_RED = FIELD_SIZE - SHOOT_X_BLUE;    double BEFORE_BALL_X_RED = FIELD_SIZE - BEFORE_BALL_X_BLUE;    double PARK_X_RED = FIELD_SIZE - PARK_X_BLUE;    public static final double LINE_1_Y = 33.000;    private Follower follower;    private PathChain StarttoShootPos;    private PathChain ShootPostoPickup1Pos;    private PathChain Pickup1PostoPickedup1Pos;    private PathChain Pickedup1PostoPickup1Pos;    private PathChain Pickup1PostoShootPos;    public PathChain ShootPostoPickup2Pos;    public PathChain Pickup2PostoPickedup2Pos;    public PathChain Pickedup2PostoPickup2Pos;    public PathChain Pickup2PostoShootPos;    public PathChain ShootPostoPickup3Pos;    public PathChain Pickup3PostoPickedup3Pos;    public PathChain Pickedup3PostoPickup3Pos;    public PathChain Pickup3PostoShootPos;    public PathChain ShootPostoParkPos;    public enum Step {        START_TO_SHOOT,        SHOOT_FIRST_BALL1,        SHOOT_SECOND_BALL1,        SHOOT_THIRD_BALL1,        SHOOT_TO_PICKUP1,        PICKUP1_TO_PICKEDUP1,        PICKEDUP1_TO_PICKUP1,        PICKUP1_TO_SHOOT,        SHOOT_FIRST_BALL2,        SHOOT_SECOND_BALL2,        SHOOT_THIRD_BALL2,        SHOOT_TO_PICKUP2,        PICKUP2_TO_PICKEDUP2,        PICKEDUP2_TO_PICKUP2,        PICKUP2_TO_SHOOT,        SHOOT_FIRST_BALL3,        SHOOT_SECOND_BALL3,        SHOOT_TO_PICKUP3,        PICKUP3_TO_PICKEDUP3,        PICKEDUP3_TO_PICKUP3,        PICKUP3_TO_SHOOT,        SHOOT_FIRST_BALL4,        SHOOT_SECOND_BALL4,        SHOOT_TO_PARK,        DONE    }    public void init() {        super.init();        follower = Constants.createFollower(hardwareMap);    }    public void init_loop() {        super.init_loop();    }    public void start() {        super.start();        robot.outtake.setAngle(37, AngleUnit.DEGREES, telemetry);        Pose startingPose;        Pose shootingPose;        Pose beforeBallPose;        Pose afterBallPose;        Pose parkingPose;        if (isRed) {            telemetry.addLine("red path");            startingPose = new Pose(SHOOT_X_RED, START_Y, Math.toRadians(90));            shootingPose = new Pose(SHOOT_X_RED, SHOOT_Y, Math.toRadians(65));            beforeBallPose = new Pose(BEFORE_BALL_X_RED, LINE_1_Y, Math.toRadians(0));            afterBallPose = new Pose(RED_X_STOP, LINE_1_Y, Math.toRadians(0));            parkingPose = new Pose(PARK_X_RED, SHOOT_Y, Math.toRadians(90));        } else {            startingPose = new Pose(SHOOT_X_BLUE, START_Y, Math.toRadians(90));            shootingPose = new Pose(SHOOT_X_BLUE, SHOOT_Y, Math.toRadians(115));            beforeBallPose = new Pose(BEFORE_BALL_X_BLUE, LINE_1_Y, Math.toRadians(180));            afterBallPose = new Pose(BLUE_X_STOP, LINE_1_Y, Math.toRadians(180));            parkingPose = new Pose(PARK_X_BLUE, SHOOT_Y, Math.toRadians(90));        }        follower.setStartingPose(startingPose);        StarttoShootPos = follower                .pathBuilder()                .addPath(new BezierLine(startingPose, shootingPose))                .setLinearHeadingInterpolation(startingPose.getHeading(), shootingPose.getHeading())                .build();        ShootPostoPickup1Pos = follower                .pathBuilder()                .addPath(new BezierLine(shootingPose, beforeBallPose))                .setLinearHeadingInterpolation(shootingPose.getHeading(), beforeBallPose.getHeading())                .build();        Pickup1PostoPickedup1Pos = follower                .pathBuilder()                .addPath(new BezierLine(beforeBallPose, afterBallPose))                .setLinearHeadingInterpolation(beforeBallPose.getHeading(), afterBallPose.getHeading())                .build();        Pickedup1PostoPickup1Pos = follower                .pathBuilder()                .addPath(new BezierLine(afterBallPose, beforeBallPose))                .setLinearHeadingInterpolation(afterBallPose.getHeading(), beforeBallPose.getHeading())                .build();        Pickup1PostoShootPos = follower                .pathBuilder()                .addPath(new BezierLine(beforeBallPose, shootingPose))                .setLinearHeadingInterpolation(beforeBallPose.getHeading(), shootingPose.getHeading())                .build();        ShootPostoParkPos = follower                .pathBuilder()                .addPath(new BezierLine(shootingPose, parkingPose))                .setLinearHeadingInterpolation(shootingPose.getHeading(), parkingPose.getHeading())                .build();        robot.transfer.shooterDown();        robot.transfer.storeBall();        robot.outtake.spinUp();    }    private Step currentStep = Step.START_TO_SHOOT;    private final ElapsedTime stepTimer = new ElapsedTime();    boolean inStep;    public void loop() {        super.loop();        if (getRuntime() < delayTimeSeconds) {            telemetry.addData("Time Left", delayTimeSeconds - getRuntime());            return;        }        follower.update();        telemetry.addData("Position", follower.getPose());        telemetry.addData("Step", currentStep);        telemetry.addData("TurnToGoal Angle", robot.odoPods.turnToGoal(isRed, robot.odoPods.getPose().getX(DistanceUnit.INCH), robot.odoPods.getPose().getY(DistanceUnit.INCH)));        // In your loop or update method:        switch (currentStep) {            case START_TO_SHOOT:                if (!follower.isBusy()) {                    follower.followPath(StarttoShootPos, true);                    nextStep(Step.SHOOT_FIRST_BALL1);                }                break;            case SHOOT_FIRST_BALL1:            case SHOOT_FIRST_BALL2:                if (inStep || (!follower.isBusy() && robot.outtake.isReady(telemetry))) {                    inStep = true;                    if (stepTimer.seconds() < .5) {                        robot.transfer.moveToShooter();                    } else if (stepTimer.seconds() < 1) {                        robot.transfer.shooterDown();                    } else if (stepTimer.seconds() < 1.5) {                        robot.intake.intake();                    } else {                        if (currentStep == Step.SHOOT_FIRST_BALL1) {                            nextStep(Step.SHOOT_SECOND_BALL1);                        }                        else if (currentStep == Step.SHOOT_FIRST_BALL2)                            nextStep(Step.SHOOT_SECOND_BALL2);//                    else if (currentStep == Step.SHOOT_FIRST_BALL3)//                        nextStep(Step.SHOOT_SECOND_BALL3);//                    else//                        nextStep(Step.SHOOT_SECOND_BALL4);                    }                } else {                    stepTimer.reset();                }                break;            case SHOOT_SECOND_BALL1:            case SHOOT_SECOND_BALL2:                if (inStep || robot.outtake.isReady(telemetry)) {                    inStep = true;                    if (stepTimer.seconds() < 0.5) {                        robot.transfer.moveToShooter();                    } else if (stepTimer.seconds() < 1) {                        robot.intake.stop();                        robot.transfer.shooterDown();                    } else if (stepTimer.seconds() < 2) {                        robot.transfer.storageDown();                    } else {                        if (currentStep == Step.SHOOT_SECOND_BALL1) {                            nextStep(Step.SHOOT_THIRD_BALL1);                        }                        else if (currentStep == Step.SHOOT_SECOND_BALL2)                            nextStep(Step.SHOOT_THIRD_BALL2);                    }                } else {                    stepTimer.reset();                }                break;            case SHOOT_THIRD_BALL1:            case SHOOT_THIRD_BALL2:                if (inStep || robot.outtake.isReady(telemetry)) {                    inStep = true;                    if (stepTimer.seconds() < 0.5) {                        robot.transfer.moveToShooter();                    } else if (stepTimer.seconds() < 1) {                        robot.transfer.shooterDown();                    } else {                        if (currentStep == Step.SHOOT_THIRD_BALL1)                            nextStep(Step.SHOOT_TO_PICKUP1);                        else if (currentStep == Step.SHOOT_THIRD_BALL2)                            nextStep(Step.SHOOT_TO_PARK);                    }                } else {                    stepTimer.reset();                }                break;            case SHOOT_TO_PICKUP1:                if (!follower.isBusy()) {                    follower.followPath(ShootPostoPickup1Pos, true);                    robot.transfer.resetBothDown();                    robot.intake.intake();                    nextStep(Step.PICKUP1_TO_PICKEDUP1);                }                break;            case PICKUP1_TO_PICKEDUP1:                if (!follower.isBusy()) {                    follower.followPath(Pickup1PostoPickedup1Pos, true);                }                if (robot.ballLocationSensors.isBallinTransfer()) {                    telemetry.addData("Ball in transfer", true);                    if (robot.ballLocationSensors.isBallinIntake()) {                        robot.intake.stop();                        nextStep(Step.PICKEDUP1_TO_PICKUP1);                    }                    robot.transfer.moveIntoStorage();                }                if (stepTimer.seconds() > 5){                    nextStep(Step.PICKEDUP1_TO_PICKUP1);                }                break;            case PICKEDUP1_TO_PICKUP1:                if (!follower.isBusy()) {                    follower.followPath(Pickedup1PostoPickup1Pos, true);                    nextStep(Step.PICKUP1_TO_SHOOT);                }                break;            case PICKUP1_TO_SHOOT:                if (!follower.isBusy()) {                    follower.followPath(Pickup1PostoShootPos, true);                    nextStep(Step.SHOOT_FIRST_BALL2);                }                break;//        case SHOOT_TO_PICKUP2://            if (!follower.isBusy()) {//                follower.followPath(ShootPostoPickup2Pos);//                robot.transfer.resetBothDown();//                nextStep(Step.PICKUP2_TO_PICKEDUP2);//            }//            break;////        case PICKUP2_TO_PICKEDUP2://            if (!follower.isBusy()) {//                follower.followPath(Pickup2PostoPickedup2Pos);//                nextStep(Step.PICKEDUP2_TO_PICKUP2);//            }//            break;//        case PICKEDUP2_TO_PICKUP2://            if (!follower.isBusy()) {//                follower.followPath(Pickedup2PostoPickup2Pos);//                nextStep(Step.PICKUP2_TO_SHOOT);//            }//            break;////        case PICKUP2_TO_SHOOT://            if (!follower.isBusy()) {//                follower.followPath(Pickup2PostoShootPos, true);//                nextStep(Step.SHOOT_FIRST_BALL3);//            }//            break;//        case SHOOT_TO_PICKUP3://            if (!follower.isBusy()) {//                follower.followPath(ShootPostoPickup3Pos);//                robot.transfer.resetBothDown();//                nextStep(Step.PICKUP3_TO_PICKEDUP3);//            }//            break;//        case PICKUP3_TO_PICKEDUP3://            if (!follower.isBusy()) {//                follower.followPath(Pickup3PostoPickedup3Pos);//                nextStep(Step.PICKEDUP3_TO_PICKUP3);//            }//            break;//        case PICKEDUP3_TO_PICKUP3://            if (!follower.isBusy()) {//                follower.followPath(Pickedup3PostoPickup3Pos);//                nextStep(Step.PICKUP3_TO_SHOOT);}//            break;//        case PICKUP3_TO_SHOOT://            if (!follower.isBusy()) {//                follower.followPath(Pickup3PostoShootPos, true);//                nextStep(Step.SHOOT_FIRST_BALL4);//            }//            break;            case SHOOT_TO_PARK:                if (!follower.isBusy() && robot.outtake.isReady(telemetry)) {                    follower.followPath(ShootPostoParkPos, true);                    robot.transfer.resetBothDown();                    robot.outtake.stop();                    nextStep(Step.DONE);                }                break;            case DONE:                robot.outtake.stop();                //Do nothing                break;        }    }    private void nextStep(Step next) {        currentStep = next;        inStep = false;        stepTimer.reset();    }}